<!doctype html>

<html>

<head>
    <title>Test Fretboard Page</title>
    <meta name="viewport" content="initial-scale=1">
    <script src="./jquery-1.11.2.min.js"></script>
    <script src="./fretboard.js"></script>
    <link rel="stylesheet" type="text/css" href="./styles.css">
</head>

<body>
    <style>
    .container {
        min-width: 280px;
        max-width: 1600px;
        min-height: 600px;
        overflow-x: hidden;
        background: lightgray;
        padding: 20px 40px;
    }
    
    @media (max-width: 800px) {
        .container {
            padding: 5px;
        }
    }
    
    button {
        margin: 20px 2px;
        cursor: pointer;
    }
    </style>
    <div class="container">
        <div class="my-fretboard-js"></div>
        <div class="my-fretboard-js space-theme"></div> 
        
        <button class="set-clicked-notes-maj7 btn btn-small">Click C maj7 chord</button>
        <button class="set-clicked-notes-min7 btn btn-small">Click A min7 chord</button>
        <button class="show-progression btn btn-small">Click progression notes</button>
        <button class="show-scale-run btn btn-small">Click scale run notes</button>
        <button class="show-arpeggio btn btn-small">Click arpeggio notes</button>
        <button class="get-clicked-notes btn btn-small">Get clicked notes (console)</button>
        <button class="unclick btn btn-small">Unclick notes</button>
        <button class="note-clicking-disabled btn btn-small">Disable/enable note clicking</button>
        <button class="add-string btn btn-small">Add string</button>
        <button class="remove-string btn btn-small">Remove string</button>
        <button class="add-fret btn btn-small">Add fret</button>
        <button class="remove-fret btn btn-small">Remove fret</button>
        <button class="toggle-chord-mode btn btn-small">Toggle chord mode</button>
        <button class="toggle-note-mode btn btn-small">Toggle note mode (interval/letter)</button>
        <button class="toggle-root-for-interval-mode btn btn-small">Change root for interval mode (C/E)</button>
    </div>

<script type="text/javascript">
    (function ($) {
        var isChordMode = true,
            isDisabled = false,
            eightStringTuning = [{
                letter: "E",
                octave: 4
            }, {
                letter: "B",
                octave: 3
            }, {
                letter: "G",
                octave: 3
            }, {
                letter: "D",
                octave: 3
            }, {
                letter: "A",
                octave: 2
            }, {
                letter: "E",
                octave: 2
            }, {
                letter: "B",
                octave: 1
            }, {
                letter: "F#/Gb",
                octave: 1
            }],
            tuning = $.extend(true, [], eightStringTuning).slice(0, 6),
            numFrets = 16,
            cMaj7Notes = [{
                stringItsOn: {
                    letter: "E",
                    octave: 4
                },
                fretNumber: 3,
                cssClass: "red"
            }, {
                stringItsOn: {
                    letter: "B",
                    octave: 3
                },
                fretNumber: 5,
                cssClass: "red"
            }, {
                stringItsOn: {
                    letter: "G",
                    octave: 3
                },
                fretNumber: 4,
                cssClass: "red"
            }, {
                stringItsOn: {
                    letter: "D",
                    octave: 3
                },
                fretNumber: 5,
                cssClass: "red"
            }, {
                stringItsOn: {
                    letter: "A",
                    octave: 2
                },
                fretNumber: 3,
                cssClass: "red"
            }],
            aMin7Notes = [{
                stringItsOn: {
                    letter: "B",
                    octave: 3
                },
                fretNumber: 5,
                cssClass: "green"
            }, {
                stringItsOn: {
                    letter: "G",
                    octave: 3
                },
                fretNumber: 5,
                cssClass: "green"
            }, {
                stringItsOn: {
                    letter: "D",
                    octave: 3
                },
                fretNumber: 5,
                cssClass: "green"
            }, {
                stringItsOn: {
                    letter: "E",
                    octave: 2
                },
                fretNumber: 5,
                cssClass: "green"
            }],
            fMaj7Notes = [{
                stringItsOn: {
                    letter: "B",
                    octave: 3
                },
                fretNumber: 1,
                cssClass: "yellow"
            }, {
                stringItsOn: {
                    letter: "G",
                    octave: 3
                },
                fretNumber: 2,
                cssClass: "yellow"
            }, {
                stringItsOn: {
                    letter: "D",
                    octave: 3
                },
                fretNumber: 2,
                cssClass: "yellow"
            }, {
                stringItsOn: {
                    letter: "E",
                    octave: 2
                },
                fretNumber: 1,
                cssClass: "yellow"
            }],
            g7Notes = [{
                stringItsOn: {
                    letter: "B",
                    octave: 3
                },
                fretNumber: 3
            }, {
                stringItsOn: {
                    letter: "G",
                    octave: 3
                },
                fretNumber: 4
            }, {
                stringItsOn: {
                    letter: "D",
                    octave: 3
                },
                fretNumber: 3
            }, {
                stringItsOn: {
                    letter: "E",
                    octave: 2
                },
                fretNumber: 3
            }],
            dimensionsFunc = function ($fretboardContainer, $fretboardBody, settings) {
                var numStrings = settings.tuning.length;

                return {
                    height: numStrings * 32
                };
            },
            noteCircleList = [3, 5, 7, 9, 12, 15, 17, 19, 21, 24],
            intervalSettings = {
                intervals: ['1', 'b2', '2', 'b3', '3', '4', 'b5', '5', 'b6', '6', 'b7', '7'],
                root: "C"
            },
            noteMode = 'interval',
            isIntervalMode = noteMode === 'interval',
            fretboardChangeFunc = function () {
                
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');

                    //console.log(fretboard.getAllNotes());
                    //console.log(fretboard.getTuning());
                    //console.log(fretboard.getClickedNotes());
                    console.log("On fretboard change");
                });
            },
            options = {
                allNoteLetters: ["C", "C#/Db", "D", "D#/Eb", "E", "F", "F#/Gb", "G", "Ab/G#", "A", "A#/Bb", "B"],
                tuning: tuning,
                numFrets: numFrets,
                isChordMode: isChordMode,
                noteClickingDisabled: isDisabled,
                noteMode: noteMode,
                intervalSettings: intervalSettings,
                animationSpeed: 500, // ms
                dimensionsFunc: dimensionsFunc,
                noteCircleList: noteCircleList,
                onFretboardChange: fretboardChangeFunc
            },
            $fretboards = $(".my-fretboard-js");

        $fretboards.fretboard(options);

        $(".toggle-chord-mode").on("click", function () {
            isChordMode = !isChordMode;

            $fretboards.each(function () {
                $(this).data('fretboard').setChordMode(isChordMode);
            });
        });

        $(".set-clicked-notes-maj7").on("click", function () {
            $fretboards.each(function () {
                var fretboard = $(this).data('fretboard');
                
                fretboard.clearClickedNotes();
                fretboard.setClickedNotes(cMaj7Notes);
            });
        });
        
        $(".set-clicked-notes-min7").on("click", function () {
            $fretboards.each(function () {
                var fretboard = $(this).data('fretboard');
                
                fretboard.clearClickedNotes();
                fretboard.setClickedNotes(aMin7Notes);
            });
        });

        $(".get-clicked-notes").on("click", function () {
            $fretboards.each(function () {
                console.log($(this).data('fretboard').getClickedNotes());
            });
        });

        $(".note-clicking-disabled").on("click", function () {
            isDisabled = !isDisabled;

            $fretboards.each(function () {
                $(this).data('fretboard').setNoteClickingDisabled(isDisabled);
            });
        });

        $(".add-string").on("click", function () {
            if (tuning.length < 8) {
                tuning.push({
                    letter: eightStringTuning[tuning.length].letter,
                    octave: eightStringTuning[tuning.length].octave
                });

                $fretboards.each(function () {
                    $(this).data('fretboard').setTuning(tuning);
                });
            }
        });

        $(".remove-string").on("click", function () {
            if (tuning.length > 4) {
                tuning.pop();

                $fretboards.each(function () {
                    $(this).data('fretboard').setTuning(tuning);
                });
            }
        });

        $(".add-fret").on("click", function () {
            if (numFrets < 24) {
                numFrets++;

                $fretboards.each(function () {
                    $(this).data('fretboard').setNumFrets(numFrets);
                });
            }
        });

        $(".remove-fret").on("click", function () {
            if (numFrets > 12) {
                numFrets--;

                $fretboards.each(function () {
                    $(this).data('fretboard').setNumFrets(numFrets);
                });
            }
        });

        /*$(".redraw").on("click", function() {
            $fretboards.each(function() {
                $(this).data('fretboard').redraw();
            });
        });*/

        $(".unclick").on("click", function () {
            $fretboards.each(function () {
                $(this).data('fretboard').clearClickedNotes();
            });
        });

        $(".toggle-note-mode").on("click", function() {
            isIntervalMode = !isIntervalMode;

            $fretboards.each(function () {
                $(this).data('fretboard').setNoteMode(isIntervalMode ? 'interval' : 'letter');
            });
        });

        $(".toggle-root-for-interval-mode").on("click", function () {
            intervalSettings.root = intervalSettings.root === "C" ? "G" : "C";

            $fretboards.each(function () {
                $(this).data('fretboard').setIntervalSettings(intervalSettings);
            });
        });

        $(".show-progression").on("click", function () {
            var ms = 0,
                delta = 1000;
 
            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes(cMaj7Notes);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes(aMin7Notes);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes(fMaj7Notes);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes(g7Notes);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes(cMaj7Notes);
                });
            }, ms);
        });

        $(".show-scale-run").on("click", function () {
            var ms = 0,
                delta = 100;
                
            $fretboards.each(function () {
                $(this).data('fretboard').clearClickedNotes();
            });

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 8
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 6
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "B",
                            octave: 3
                        },
                        fretNumber: 8
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "B",
                            octave: 3
                        },
                        fretNumber: 6
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "B",
                            octave: 3
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "G",
                            octave: 3
                        },
                        fretNumber: 7
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "G",
                            octave: 3
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "D",
                            octave: 3
                        },
                        fretNumber: 8
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "D",
                            octave: 3
                        },
                        fretNumber: 7
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "D",
                            octave: 3
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 8
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 7
                    }]);
                });
            }, ms);
            
            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);
        });

        $(".show-arpeggio").on("click", function () {
            var ms = 0,
                delta = 300;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 1
                    }]);
                });

                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 1
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "D",
                            octave: 3
                        },
                        fretNumber: 3
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "G",
                            octave: 3
                        },
                        fretNumber: 2
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "G",
                            octave: 3
                        },
                        fretNumber: 3
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "B",
                            octave: 3
                        },
                        fretNumber: 3
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 1
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 6
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "E",
                            octave: 4
                        },
                        fretNumber: 1
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "B",
                            octave: 3
                        },
                        fretNumber: 3
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "G",
                            octave: 3
                        },
                        fretNumber: 3
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "G",
                            octave: 3
                        },
                        fretNumber: 2
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "D",
                            octave: 3
                        },
                        fretNumber: 3
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 5
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    var fretboard = $(this).data('fretboard');
                    
                    fretboard.clearClickedNotes();
                    fretboard.setClickedNotes([{
                        stringItsOn: {
                            letter: "A",
                            octave: 2
                        },
                        fretNumber: 1
                    }]);
                });
            }, ms);

            ms += delta;

            setTimeout(function () {
                $fretboards.each(function () {
                    $(this).data('fretboard').clearClickedNotes();
                });
            }, ms);
        });
    })(jQuery);
</script>
</body>
</html>
