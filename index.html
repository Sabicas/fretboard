<!doctype html>

<html>

<head>
  <title>Test Fretboard Page</title>
  <meta charset="utf-8" />
  <script src="jquery-1.9.1.min.js"></script>
  <script src="raphael-min.js"></script>
  <script src="fretboard.js"></script>
</head>

<body>
  <div id="canvas_container"></div>
  <button class="reset-button">Unclick Frets</button>
  <button class="add-string-button">Add String</button>
  <button class="remove-string-button">Remove String</button>
  <button class="change-tuning-button">Change Tuning</button>
  <button class="note-click-disable">Toggle Note Clicking Allowed</button>
  <button class="tuning-triangle-disable">Toggle Tuning Arrows Allowed</button>
  <button class="chord-mode">Toggle chord mode</button>
  <button class="get-clicked">Get clicked notes (console)</button>
  <script type="text/javascript">
    var chordMode = true;
    var noteClickingDisabled = false;
    var tuningClickingDisabled = false;
    var guitarStringNotes = [{
      noteLetter: "E",
      noteOctave: 4
    }, {
      noteLetter: "B",
      noteOctave: 4
    }, {
      noteLetter: "G",
      noteOctave: 3
    }, {
      noteLetter: "D",
      noteOctave: 3
    }, {
      noteLetter: "A",
      noteOctave: 3
    }, {
      noteLetter: "E",
      noteOctave: 2
    }];

    $('#canvas_container').fretboard({
      fretboardOrigin: [200, 200],
      numFrets: 16,
      fretWidth: 70,
      fretHeight: 35,
      isChordMode: chordMode,
      noteClickingDisabled: noteClickingDisabled,
      tuningClickingDisabled: tuningClickingDisabled,
      guitarStringNotes: guitarStringNotes,
      clickedNoteCircColor: "purple",
      clickedNoteTextColor: "white",
      hoverNoteCircColor: "yellow",
      hoverNoteTextColor: "red",
      fretboardColor: "wheat",
      stringColor: "black",
      tuningTriangleColor: "blue",
      fretsToDrawOneCircleOn: [0, 3, 5, 7, 9],
      opacityAnimateSpeed: 250,
      showTuningTriangles: true,
      showTuningSquares: true,
      tuningSquaresColor: "black",
      tuningSquaresTextColor: "orange",
      nutColor: "brown"
    });

    var myFretboard = $('#canvas_container').data('fretboard');

    $('.note-click-disable').on("click", function() {
      noteClickingDisabled = !noteClickingDisabled;
      if (noteClickingDisabled) {
        myFretboard.disableNoteClicking();
      } else {
        myFretboard.enableNoteClicking();
      }
    });

    $('.tuning-triangle-disable').on("click", function() {

      tuningClickingDisabled = !tuningClickingDisabled;
      if (tuningClickingDisabled) {

        myFretboard.disableTuningClicking();

      } else {

        myFretboard.enableTuningClicking();

      }

    })

     $('.chord-mode').on("click", function() {
      chordMode = !chordMode;
      myFretboard.setChordMode(chordMode);
    });

    $('.reset-button').on("click", function() {
      myFretboard.clearClickedNotes();
    });

    $('.add-string-button').on("click", function() {
      guitarStringNotes.push({
        noteLetter: "Gb/F#",
        noteOctave: 2
      });
      myFretboard.setTuning(guitarStringNotes);
    });

    $('.remove-string-button').on("click", function() {
      guitarStringNotes.pop();
      myFretboard.setTuning(guitarStringNotes);
    });
    
    $('.change-tuning-button').on("click", function() {
        for (var i = 2; i < guitarStringNotes.length; i++){
            --guitarStringNotes[i].noteOctave;
        }
        guitarStringNotes.push({
          noteLetter: "Gb/F#",
          noteOctave: 2
        });
		
        guitarStringNotes.push({
          noteLetter: "Gb/F#",
          noteOctave: 1
        });
		
        myFretboard.setTuning(guitarStringNotes); 
    });

    myFretboard.setClickedNoteByStringNoteAndFretNum({
      stringItsOn: {
        noteLetter: "E",
        noteOctave: 4
      },
      fretNumber: 16,
      circColor: "red",
      textColor: "white"
    });

    myFretboard.setClickedNoteByStringNoteAndFretNum({
      stringItsOn: {
        noteLetter: "B",
        noteOctave: 4
      },
      fretNumber: 0,
      circColor: "green",
      textColor: "black"
    });

    myFretboard.setClickedNoteByStringNoteAndFretNum({
      stringItsOn: {
        noteLetter: "G",
        noteOctave: 3
      },
      fretNumber: 6,
      circColor: "purple",
      textColor: "yellow"
    });

    myFretboard.setClickedNoteByStringNoteAndFretNum({
      stringItsOn: {
        noteLetter: "A",
        noteOctave: 3
      },
      fretNumber: 5,
      circColor: "pink",
      textColor: "brown"
    });

    $('.get-clicked').on("click", function() {
      console.log(myFretboard.getClickedNotes());
    });
  </script>
</body>

</html>
